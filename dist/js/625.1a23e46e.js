"use strict";(self["webpackChunktoutiao_lianxi"]=self["webpackChunktoutiao_lianxi"]||[]).push([[625],{1625:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{title:"搜索中心","left-arrow":""},on:{"click-left":function(s){return t.$router.back()}}}),s("div",{staticClass:"ser"},[s("van-icon",{staticClass:"myicon",attrs:{name:"search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"ipt",attrs:{type:"text",placeholder:"请输入搜索关键词"},domProps:{value:t.msg},on:{input:[function(s){s.target.composing||(t.msg=s.target.value)},t.search]}}),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:""!==t.msg,expression:"msg !== ''"}],staticClass:"cross",attrs:{name:"cross"},on:{click:function(s){t.msg=""}}}),s("button",{staticClass:"btn",on:{click:t.result}},[t._v("搜索")])],1),t.msg?s("van-cell-group",[s("van-cell",{staticClass:"mytitle",attrs:{title:"联想区域"}}),t._l(t.thinkList,(function(e,i){return s("van-cell",{key:i,attrs:{icon:"search"},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{domProps:{innerHTML:t._s(e)},on:{click:function(s){return t.toThinkResult(e)}}})]},proxy:!0}],null,!0)})}))],2):s("van-cell-group",[s("van-cell",{staticClass:"mytitle",attrs:{title:"历史记录"},scopedSlots:t._u([{key:"default",fn:function(){return[s("van-icon",{attrs:{name:"cross"},on:{click:t.clear}})]},proxy:!0}],null,!1,1730723893)}),t._l(t.historyList,(function(e,i){return s("van-cell",{key:i,attrs:{title:e},on:{click:function(s){return t.toResult(e)}}})}))],2)],1)},a=[],r=e(2746),n={data(){return{msg:"",thinkList:"",timer:null,historyList:JSON.parse(localStorage.getItem("history"))||[]}},methods:{toResult(t){this.$router.push(`/search/result?key=${t}`)},saveToLocal(t){this.historyList.unshift(t),this.historyList=[...new Set(this.historyList)],this.historyList.length>5&&this.historyList.splice(5),localStorage.setItem("history",JSON.stringify(this.historyList))},result(){this.msg&&(this.saveToLocal(this.msg),this.$router.push(`/search/result?key=${this.msg}`))},toThinkResult(t){const s=new RegExp(`<span style="color:red">${this.msg}</span>`,"ig");t=t.replace(s,this.msg),this.$router.push(`/search/result?key=${t}`),this.saveToLocal(t)},search(){clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(this.msg){const t=await(0,r.oo)({q:this.msg}),s=new RegExp(this.msg,"ig");this.thinkList=t.data.data.options.map((t=>t.replace(s,`<span style="color:red">${this.msg}</span>`)))}}),300)},clear(){this.$dialog.confirm({title:"温馨提示",message:"此操作将清除历史记录，是否继续？"}).then((()=>{this.historyList=[],localStorage.removeItem("history")})).catch((()=>{}))}}},o=n,l=e(1001),c=(0,l.Z)(o,i,a,!1,null,null,null),u=c.exports}}]);